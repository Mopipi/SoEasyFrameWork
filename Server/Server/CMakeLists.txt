cmake_minimum_required(VERSION 3.1.3)
PROJECT(Server)


#第三方库包含

INCLUDE_DIRECTORIES(../Libs/include/rapidjson)
INCLUDE_DIRECTORIES(../Libs/include/protobuf)
INCLUDE_DIRECTORIES(../Libs/include/asio)
INCLUDE_DIRECTORIES(../Libs/include/lua5.3)
INCLUDE_DIRECTORIES(../Libs/include/mysql)
INCLUDE_DIRECTORIES(../Libs/include/spdlog)
INCLUDE_DIRECTORIES(../Libs/include/redis)
#公共组件
INCLUDE_DIRECTORIES(../Common)
INCLUDE_DIRECTORIES(../Common/Core)
INCLUDE_DIRECTORIES(../Common/Coroutine)
INCLUDE_DIRECTORIES(../Common/Define)
INCLUDE_DIRECTORIES(../Common/Global)
INCLUDE_DIRECTORIES(../Common/Manager)
INCLUDE_DIRECTORIES(../Common/Module)
INCLUDE_DIRECTORIES(../Common/NetWork)
INCLUDE_DIRECTORIES(../Common/Object)
INCLUDE_DIRECTORIES(../Common/Other)
INCLUDE_DIRECTORIES(../Common/Thread)
INCLUDE_DIRECTORIES(../Common/Timer)
INCLUDE_DIRECTORIES(../Common/Util)
INCLUDE_DIRECTORIES(../Common/Script)
INCLUDE_DIRECTORIES(../Common/Script/Util)
INCLUDE_DIRECTORIES(../Common/Script/LuaType)
INCLUDE_DIRECTORIES(../Common/Script/LuaExtension)

AUX_SOURCE_DIRECTORY(./ SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Core SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Coroutine SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Define SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Global SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Manager SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Module SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/NetWork SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Object SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Other SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Thread SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Timer SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Util SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Script SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Script/Util SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Script/LuaType SCENE_SRC)
AUX_SOURCE_DIRECTORY(../Common/Script/LuaExtension SCENE_SRC)

#数据库相关
INCLUDE_DIRECTORIES(../DataBase)
INCLUDE_DIRECTORIES(../DataBase/Manager)
INCLUDE_DIRECTORIES(../DataBase/MysqlClient)
INCLUDE_DIRECTORIES(../DataBase/RedisClient)
INCLUDE_DIRECTORIES(../DataBase/QueryResult)

AUX_SOURCE_DIRECTORY(../DataBase SCENE_SRC)
AUX_SOURCE_DIRECTORY(../DataBase/Manager SCENE_SRC)
AUX_SOURCE_DIRECTORY(../DataBase/MysqlClient SCENE_SRC)
AUX_SOURCE_DIRECTORY(../DataBase/RedisClient SCENE_SRC)
AUX_SOURCE_DIRECTORY(../DataBase/QueryResult SCENE_SRC)
#核心逻辑
INCLUDE_DIRECTORIES(../CoreLogic)
INCLUDE_DIRECTORIES(../CoreLogic/Manager)

AUX_SOURCE_DIRECTORY(../CoreLogic SCENE_SRC)
AUX_SOURCE_DIRECTORY(../CoreLogic/Manager SCENE_SRC)
#公共结构体和协议
INCLUDE_DIRECTORIES(../ServerData)
INCLUDE_DIRECTORIES(../ServerData/XCode)
INCLUDE_DIRECTORIES(../ServerData/Protocol)

AUX_SOURCE_DIRECTORY(../ServerData SCENE_SRC)
AUX_SOURCE_DIRECTORY(../ServerData/XCode SCENE_SRC)
AUX_SOURCE_DIRECTORY(../ServerData/Protocol SCENE_SRC)

INCLUDE_DIRECTORIES(./)
AUX_SOURCE_DIRECTORY(./ SCENE_SRC)

LINK_DIRECTORIES(../Libs/lib)
SET(CMAKE_CXX_COMPILER "ccache")
SET(CMAKE_CXX_COMPILER_ARG1 "g++")

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -std=gnu++11" )
SET(CMAKE_BUILD_TYPE Debug)

ADD_EXECUTABLE(Server ${SCENE_SRC})
TARGET_LINK_LIBRARIES(Server protobuf pthread Lua53 hiredis mysqlclient yassl dl ${MY_ADDLIB})

SET(EXECUTABLE_OUTPUT_PATH ../bin/)



